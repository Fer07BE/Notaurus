import ContactClient from 'contact'

process.on('uncaughtExceptionMonitor', (err, origin) => {
  console.log('UNCAUGHT', err, origin)
})

const relayUrl = process.argv[2] || 'ws://localhost:8000'
const roomId = [process.argv[3]]
const username = process.argv[4]

if (!(relayUrl && roomId && username)) {
  console.error('Usage: contact <relayUrl> <roomId> <username>')
  process.exit(1)
}

const client = new ContactClient(username)
await client.joinRoom(relayUrl, roomId)
await client.init()
